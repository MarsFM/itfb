{"version":3,"sources":["index.js"],"names":["Server","constructor","this","baseUrl","getAlbums","value","fetch","mode","then","response","json","data","Promise","resolve","filter","entry","id","catch","error","console","log","Loader","elem","message","document","createElement","classList","add","start","innerHTML","append","stop","remove","Element","type","addClass","name","addText","text","setAttr","key","setAttribute","setInside","block","render","elemBlocks","main","img","url","info","blockInfo","blockText","blockId","container","querySelector","countElement","server","loader","async","init","obj","albums","count","addToContainer","setCountElements","map","album","createBlock","blockTitle","title","albumId","arr","elements","length"],"mappings":"OAAO,MAAMA,OACXC,cACEC,KAAKC,QAAU,8CAGjBC,UAAUC,GACR,OAAOC,MAAMJ,KAAKC,QAAS,CACzBI,KAAM,YAELC,KAAKC,GACGA,EAASC,QAEjBF,KAAKG,GACG,IAAIC,QAAQC,IAIjBA,EAHkBF,EAAKG,OAAOC,GACrBA,EAAMC,IAAMX,OAKxBY,MAAMC,IACLC,QAAQC,IAAIF,aAKb,MAAMG,OACXpB,YAAYqB,GACVpB,KAAKoB,KAAOA,EACZpB,KAAKqB,QAAUC,SAASC,cAAc,OACtCvB,KAAKqB,QAAQG,UAAUC,IAAI,UAG7BC,QACE1B,KAAKqB,QAAQM,UAAY,gBACzB3B,KAAKoB,KAAKQ,OAAO5B,KAAKqB,SAGxBQ,OACE7B,KAAKqB,QAAQS,iBAIV,MAAMC,QACXhC,YAAYiC,GACVhC,KAAKgC,KAAOA,EACZhC,KAAKoB,KAAOE,SAASC,cAAcvB,KAAKgC,MAG1CC,SAASC,GACPlC,KAAKoB,KAAKI,UAAUC,IAAIS,GAG1BC,QAAQC,GACNpC,KAAKoB,KAAKO,UAAYS,EAGxBC,QAAQC,EAAKnC,GACXH,KAAKoB,KAAKmB,aAAaD,EAAKnC,GAG9BqC,UAAUC,GACRA,EAAMb,OAAO5B,KAAKoB,MAGpBsB,SACE,OAAO1C,KAAKoB,aAKT,MAAMuB,WAAa,CACxBC,OACE,MAAMH,EAAQ,IAAIV,QAAQ,OAE1B,OADAU,EAAMR,SAAS,SACRQ,GAGTI,IAAIzB,EAAM0B,GACR,MAAMD,EAAM,IAAId,QAAQ,OAIxB,OAHAc,EAAIZ,SAAS,cACbY,EAAIR,QAAQ,MAAOS,GACnBD,EAAIL,UAAUpB,GACPyB,GAGTE,KAAK3B,GACH,MAAM4B,EAAY,IAAIjB,QAAQ,OAG9B,OAFAiB,EAAUf,SAAS,eACnBe,EAAUR,UAAUpB,GACb4B,GAGTZ,KAAKhB,EAAMgB,GACT,MAAMa,EAAY,IAAIlB,QAAQ,KAG9B,OAFAkB,EAAUd,QAAQC,GAClBa,EAAUT,UAAUpB,GACb6B,GAGTnC,GAAGM,EAAMN,GACP,MAAMoC,EAAU,IAAInB,QAAQ,QAC5BmB,EAAQjB,SAAS,aACjBiB,EAAQf,QAAQrB,GAChBoC,EAAQV,UAAUpB,KAKtB,MAAM+B,UAAY7B,SAAS8B,cAAc,cACnCC,aAAe/B,SAAS8B,cAAc,gBAEtCE,OAAS,IAAIxD,OACbyD,OAAS,IAAIpC,OAAOgC,WAE1BK,eAAeC,KAAKC,GAClB,MAAMC,QAAezD,UAAUwD,EAAIE,OACnCC,eAAeF,GACfG,iBAAiBH,GACjBJ,OAAO1B,OAGT2B,eAAetD,UAAUC,GAMvB,aALqBmD,OAAOpD,UAAUC,IACb4D,IAAIC,GACpBC,YAAYD,IAMvB,MAAMC,YAAcD,IAClB,MAAMvB,EAAQE,WAAWC,OAEnBI,GADOL,WAAWE,IAAIJ,EAAMC,SAAUsB,EAAMlB,KAChCH,WAAWI,KAAKN,EAAMC,WAClCwB,EAAavB,WAAWP,KAAKY,EAAUN,SAAUsB,EAAMG,OACvDlB,EAAYN,WAAWP,KAAKY,EAAUN,SAAU,YACrCC,WAAW7B,GAAGmC,EAAUP,SAAUsB,EAAMI,SAMzD,OAJAF,EAAWjC,SAAS,gBACpBgB,EAAUhB,SAAS,eACnBgB,EAAUhB,SAAS,oBAEZQ,EAAMC,UAGTmB,eAAiBQ,IACrBlB,UAAUvB,UAAUyC,IAGhBP,iBAAmBQ,IACvBjB,aAAa1B,UAAY2C,EAASC,QAIpChB,OAAO7B,QACP+B,KAAK,CACHG,MAAO","file":"main.js","sourcesContent":["export class Server {\n  constructor() {\n    this.baseUrl = 'https://jsonplaceholder.typicode.com/photos'; // ?_limit=20\n  }\n\n  getAlbums(value) {\n    return fetch(this.baseUrl, {\n      mode: 'no-cors',\n    })\n      .then(response => {\n        return response.json();\n      })\n      .then(data => {\n        return new Promise(resolve => {\n          const shortData = data.filter(entry => {\n            return entry.id <= value;\n          });\n          resolve(shortData);\n        });\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  }\n}\n\nexport class Loader {\n  constructor(elem) {\n    this.elem = elem;\n    this.message = document.createElement('div');\n    this.message.classList.add('loader');\n  }\n\n  start() {\n    this.message.innerHTML = 'Идёт загрузка';\n    this.elem.append(this.message);\n  }\n\n  stop() {\n    this.message.remove();\n  }\n}\n\nexport class Element {\n  constructor(type) {\n    this.type = type;\n    this.elem = document.createElement(this.type);\n  }\n\n  addClass(name) {\n    this.elem.classList.add(name);\n  }\n\n  addText(text) {\n    this.elem.innerHTML = text;\n  }\n\n  setAttr(key, value) {\n    this.elem.setAttribute(key, value);\n  }\n\n  setInside(block) {\n    block.append(this.elem);\n  }\n\n  render() {\n    return this.elem;\n  }\n}\n\n\nexport const elemBlocks = {\n  main() {\n    const block = new Element('div');\n    block.addClass('block');\n    return block;\n  },\n\n  img(elem, url) {\n    const img = new Element('img');\n    img.addClass('block__img');\n    img.setAttr('src', url);\n    img.setInside(elem);\n    return img;\n  },\n\n  info(elem) {\n    const blockInfo = new Element('div');\n    blockInfo.addClass('block__info');\n    blockInfo.setInside(elem);\n    return blockInfo;\n  },\n\n  text(elem, text) {\n    const blockText = new Element('p');\n    blockText.addText(text);\n    blockText.setInside(elem);\n    return blockText;\n  },\n\n  id(elem, id) {\n    const blockId = new Element('span');\n    blockId.addClass('block__id');\n    blockId.addText(id);\n    blockId.setInside(elem);\n  },\n};\n\n\nconst container = document.querySelector('.container');\nconst countElement = document.querySelector('.info__count');\n\nconst server = new Server();\nconst loader = new Loader(container);\n\nasync function init(obj) {\n  const albums = await getAlbums(obj.count);\n  addToContainer(albums);\n  setCountElements(albums);\n  loader.stop();\n}\n\nasync function getAlbums(value) {\n  const albums = await server.getAlbums(value);\n  const allAlbums = albums.map(album => {\n    return createBlock(album);\n  });\n\n  return allAlbums;\n}\n\nconst createBlock = album => {\n  const block = elemBlocks.main();\n  const _img = elemBlocks.img(block.render(), album.url);\n  const blockInfo = elemBlocks.info(block.render());\n  const blockTitle = elemBlocks.text(blockInfo.render(), album.title);\n  const blockText = elemBlocks.text(blockInfo.render(), 'albumId:');\n  const _blockId = elemBlocks.id(blockText.render(), album.albumId);\n\n  blockTitle.addClass('block__title');\n  blockText.addClass('block__text');\n  blockText.addClass('block__text_dark');\n\n  return block.render();\n};\n\nconst addToContainer = arr => {\n  container.append(...arr);\n};\n\nconst setCountElements = elements => {\n  countElement.innerHTML = elements.length;\n};\n\n// Запуск\nloader.start();\ninit({\n  count: 20,\n});\n"]}